#!/bin/sh
. "$(dirname "$0")/_/husky.sh"

branch_name=$(git symbolic-ref --short HEAD)
branch_pattern="^(feat|fix|docs|style|refactor|perf|test|chore|revert)/[a-z0-9-]+$|^(prod|dev)$"

if ! [[ $branch_name =~ $branch_pattern ]]; then
    echo "ğŸš« Error: Branch name '$branch_name' does not follow the naming convention."
    echo ""
    echo "Branch names should either:"
    echo "1. Follow the pattern: <type>/<description>"
    echo "   Where <type> must be one of:"
    echo "    feat     âœ¨ New features"
    echo "    fix      ğŸ› Bug fixes"
    echo "    docs     ğŸ“š Documentation"
    echo "    style    ğŸ’… Styling"
    echo "    refactor â™»ï¸  Code refactoring"
    echo "    perf     âš¡ï¸ Performance"
    echo "    test     ğŸ§ª Testing"
    echo "    chore    ğŸ”§ Chores"
    echo "    revert   âª Reverts"
    echo ""
    echo "2. Or be exactly one of:"
    echo "    prod     ğŸš€ Production"
    echo "    dev      ğŸ”§ Development"
    echo ""
    echo "Examples:"
    echo "  âœ… feat/add-login"
    echo "  âœ… fix/memory-leak"
    echo "  âœ… prod"
    echo "  âœ… dev"
    echo "  âŒ feature/login"
    echo "  âŒ bugfix/issue"
    echo "  âŒ develop"
    echo ""
    exit 1
fi
